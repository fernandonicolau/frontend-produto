import './polyfills.server.mjs';
import{g as P}from"./chunk-MF7PERGC.mjs";import{a as F}from"./chunk-XKN44LQX.mjs";import{Ia as w,J as c,Ja as T,K as y,Ka as M,La as V,P as f,Q as l,S as n,T as r,Ua as q,V as I,W as _,X as d,aa as o,ba as x,ca as L,gb as N,i as h,ja as g,ka as v,n as E,o as C,s,t as u}from"./chunk-VR6YJOVK.mjs";import"./chunk-5XUXGTUW.mjs";function O(i,e){if(i&1){let t=I();n(0,"button",6),_("click",function(){s(t);let m=d();return u(m.limparCarrinho())}),o(1,"Limpar Carrinho"),r()}}function j(i,e){if(i&1){let t=I();n(0,"tr")(1,"td"),o(2),r(),n(3,"td"),o(4),g(5,"currency"),r(),n(6,"td",7)(7,"input",8),_("change",function(m){let p=s(t).$implicit,B=d();return u(B.alterarQuantidade(p,m.target.valueAsNumber))})("blur",function(){let m=s(t).$implicit,p=d();return u(p.validarQuantidade(m))}),r()(),n(8,"td"),o(9),g(10,"currency"),r(),n(11,"td")(12,"button",9),_("click",function(){let m=s(t).$implicit,p=d();return u(p.removerItem(m))}),o(13,"Remover"),r()()()}if(i&2){let t,a=e.$implicit;c(2),x(a.nome),c(2),x(v(5,4,a.preco,"BRL")),c(3),l("value",a.quantidadeNoCarrinho),c(2),L(" ",v(10,7,a.preco*((t=a.quantidadeNoCarrinho)!==null&&t!==void 0?t:1),"BRL")," ")}}function Q(i,e){i&1&&(n(0,"tr")(1,"td",10),o(2,"Nenhum item no carrinho"),r()())}function $(i,e){if(i&1&&(n(0,"tfoot")(1,"tr")(2,"th",11),o(3,"Total:"),r(),n(4,"th",12),o(5),g(6,"currency"),r()()()),i&2){let t=d();c(5),x(v(6,1,t.total,"BRL"))}}var b=class i{constructor(e){this.carrinhoService=e}carrinho=[];total=0;ngOnInit(){this.carregarCarrinho()}carregarCarrinho(){this.carrinho=this.carrinhoService.getCarrinho(),this.calcularTotal()}removerItem(e){this.carrinhoService.removerItem(e),this.carregarCarrinho()}alterarQuantidade(e,t){t<1||t>99||(this.carrinhoService.atualizarQuantidade(e.id,t),this.carregarCarrinho())}limparCarrinho(){this.carrinhoService.limparCarrinho(),this.carrinho=[],this.total=0}validarQuantidade(e){!e.quantidadeNoCarrinho||e.quantidadeNoCarrinho<1?e.quantidadeNoCarrinho=1:e.quantidadeNoCarrinho>99&&(e.quantidadeNoCarrinho=99),this.carrinhoService.atualizarQuantidade(e.id,e.quantidadeNoCarrinho),this.carregarCarrinho()}calcularTotal(){this.total=this.carrinho.reduce((e,t)=>e+Number(t.preco)*(t.quantidadeNoCarrinho||1),0)}static \u0275fac=function(t){return new(t||i)(y(F))};static \u0275cmp=E({type:i,selectors:[["app-carrinho-list"]],decls:21,vars:4,consts:[[1,"container","mt-4"],["class","btn btn-outline-danger mb-3",3,"click",4,"ngIf"],[1,"table","table-bordered","align-middle"],[1,"table-light"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-outline-danger","mb-3",3,"click"],[2,"width","120px"],["type","number","min","1","max","99",1,"form-control",3,"change","blur","value"],[1,"btn","btn-sm","btn-danger",3,"click"],["colspan","5",1,"text-center"],["colspan","3",1,"text-end"],["colspan","2"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"h3"),o(2,"Carrinho de Compras"),r(),f(3,O,2,0,"button",1),n(4,"table",2)(5,"thead",3)(6,"tr")(7,"th"),o(8,"Produto"),r(),n(9,"th"),o(10,"Pre\xE7o"),r(),n(11,"th"),o(12,"Quantidade"),r(),n(13,"th"),o(14,"Total"),r(),n(15,"th"),o(16,"A\xE7\xF5es"),r()()(),n(17,"tbody"),f(18,j,14,10,"tr",4)(19,Q,3,0,"tr",5),r(),f(20,$,7,4,"tfoot",5),r()()),t&2&&(c(3),l("ngIf",a.carrinho.length),c(15),l("ngForOf",a.carrinho),c(),l("ngIf",a.carrinho.length===0),c(),l("ngIf",a.carrinho.length))},dependencies:[w,T,M]})};var D=[{path:"",component:b}],S=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=C({type:i});static \u0275inj=h({imports:[N.forChild(D),N]})};var k=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=C({type:i});static \u0275inj=h({imports:[V,P,q,S]})};export{k as CarrinhoModule};
