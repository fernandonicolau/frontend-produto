import './polyfills.server.mjs';
import{b as e,h}from"./chunk-VR6YJOVK.mjs";import{a as o,b as n}from"./chunk-5XUXGTUW.mjs";var s=class t{carrinho=[];_totalItens=new e(0);totalItens$=this._totalItens.asObservable();constructor(){this.carregarCarrinho()}carregarCarrinho(){if(typeof window<"u"&&localStorage){let i=localStorage.getItem("carrinho")||"[]";this.carrinho=JSON.parse(i),this.atualizarTotal()}}atualizarTotal(){let i=this.carrinho.reduce((r,a)=>r+(a.quantidadeNoCarrinho||1),0);this._totalItens.next(i)}getCarrinho(){return this.carrinho}adicionar(i){let r=this.carrinho.find(a=>a.id===i.id);r?r.quantidadeNoCarrinho++:this.carrinho.push(n(o({},i),{quantidadeNoCarrinho:1})),this.salvarCarrinho()}removerItem(i){let r=this.carrinho.find(a=>a.id===i.id);r&&((r.quantidadeNoCarrinho||1)>1?r.quantidadeNoCarrinho--:this.carrinho=this.carrinho.filter(a=>a.id!==i.id),this.salvarCarrinho())}limparCarrinho(){this.carrinho=[],this.salvarCarrinho()}atualizarQuantidade(i,r){let a=this.carrinho.find(c=>c.id===i);a&&r>=1&&r<=99&&(a.quantidadeNoCarrinho=r,this.salvarCarrinho())}salvarCarrinho(){localStorage.setItem("carrinho",JSON.stringify(this.carrinho)),this.atualizarTotal()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})};export{s as a};
