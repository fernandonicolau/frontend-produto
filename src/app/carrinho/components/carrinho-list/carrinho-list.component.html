<div class="container mt-4">
    <h3>Carrinho de Compras</h3>
    <button class="btn btn-outline-danger mb-3" (click)="limparCarrinho()" *ngIf="carrinho.length">Limpar
        Carrinho</button>

    <table class="table table-bordered align-middle">
        <thead class="table-light">
            <tr>
                <th>Produto</th>
                <th>Preço</th>
                <th>Quantidade</th>
                <th>Total</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let produto of carrinho">
                <td>{{ produto.nome }}</td>
                <td>{{ produto.preco | currency:'BRL' }}</td>
                <td style="width: 120px;">
                    <input type="number" class="form-control" [value]="produto.quantidadeNoCarrinho"
                        (change)="alterarQuantidade(produto, $any($event.target).valueAsNumber)" min="1" max="99" (blur)="validarQuantidade(produto)"  />
                </td>
                <td>
                    {{ produto.preco * (produto.quantidadeNoCarrinho ?? 1) | currency:'BRL' }}
                </td>
                <td>
                    <button class="btn btn-sm btn-danger" (click)="removerItem(produto)">Remover</button>
                </td>
            </tr>

            <tr *ngIf="carrinho.length === 0">
                <td colspan="5" class="text-center">Nenhum item no carrinho</td>
            </tr>
        </tbody>
        <tfoot *ngIf="carrinho.length">
            <tr>
                <th colspan="3" class="text-end">Total:</th>
                <th colspan="2">{{ total | currency:'BRL' }}</th>
            </tr>
        </tfoot>
    </table>
</div>